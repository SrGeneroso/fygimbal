#!/usr/bin/env python3 
import fyproto

params = [[-1, -1, -7683], [0, 0, 0], [0, 2, 2], [0, 0, 59], [0, 0, 0], [0, 0, 0], [0, 1294, -2232], [0, 117, 119], [0, 0, 0], [0, -3754, -296], [0, 0, 0], [500, 500, 500], [500, 500, 500], [1, 1, 1], [90, 90, 90], [1, 1, 1], [600, 600, 600], [100, 100, 100], [1000, 1000, 1000], [30000, 30000, 30000], [30000, 30000, 30000], [1650, 1650, 1650], [1650, 1650, 1650], [63, 63, 63], [1, 1, 1], [500, 500, 500], [500, 500, 500], [18000, 18000, 8000], [200, 200, 50], [0, 0, 0], [0, 0, 0], [9, 9, 9], [10, 10, 10], [0, 1, 2], [1000, 1000, 1000], [1024, 1024, 1024], [4096, 4096, 4096], [1, 1, 1], [7, 7, 7], [16384, 16384, 16384], [25205, -9389, -19586], [200, 200, 200], [20, 20, 20], [20000, 20000, 20000], [2945, 2529, 2912], [30, 30, 30], [-32768, -32768, -32768], [0, 0, 0], [100, 100, 100], [0, 0, 0], [0, 0, 0], [4000, 4000, 4000], [0, 0, 0], [20, 20, 20], [2500, 2500, 2500], [1, 1, 1], [10, 10, 10], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [1000, 1000, 1000], [3, 3, 3], [10, 10, 10], [0, 0, 0], [1024, 1024, 1024], [1024, 1024, 1024], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [-1935, 1369, -2324], [0, 0, 288], [0, 0, 0], [0, 0, 0], [17, -4042, 0], [2943, 2988, 2928], [22000, 22000, 22000], [50, 50, 50], [2000, 2000, 2000], [5000, 5000, 5000], [200, 200, 200], [0, 0, 0], [0, 0, 0], [0, 0, 14], [0, 0, 19], [0, 0, 23], [0, 0, 1], [0, 0, 287], [0, 0, -149], [0, 0, -54], [0, 0, 75], [0, 0, -47], [0, 0, 1], [1000, 1000, 1000], [1000, 1000, 1000], [1000, 1000, 1000], [437, 437, 437], [0, 0, 0], [1696, 2174, 2648], [900, 900, 900], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 112], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [42, 47, 46], [17, 67, 54], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [0, 0, 0], [115, 115, 115]]

gimbal = fyproto.GimbalPort()
gimbal.waitConnect(timeout=10)
print("Connected, version %s" % gimbal.version)

for n, values in enumerate(params):
	for t, value in enumerate(values):
		gimbal.setParam(target=t, number=n, value=value)
		readback = gimbal.getParam(target=t, number=n)
		# Also throttles outgoing data
		print("Set t=%02x n=%02x to %d (read %d)" % (t, n, value, readback))

for t in range(3):
	gimbal.saveParams(target=t)
	print("Saved params on MCU %d" % t)

